<common:WindowBase
	x:Class="ElectronicObserver.Window.Dialog.UiBlocker.UiBlockerWindow"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:common="clr-namespace:ElectronicObserver.Common"
	xmlns:controls="clr-namespace:ColorPickerLib.Controls;assembly=ColorPickerLib"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:local="clr-namespace:ElectronicObserver.Window.Dialog.UiBlocker"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:translations="clr-namespace:ElectronicObserver.Translations"
	xmlns:ui="http://schemas.modernwpf.com/2019"
	Title="{x:Static translations:UiBlockerResources.UiBlocker}"
	Width="800"
	Height="450"
	d:DataContext="{d:DesignInstance local:UiBlockerManagerViewModel}"
	ui:WindowHelper.UseModernWindowStyle="True"
	x:TypeArguments="local:UiBlockerManagerViewModel"
	mc:Ignorable="d"
	>
	<Window.Resources>
		<DataTemplate DataType="{x:Type local:UiBlockerViewModel}">
			<StackPanel>
				<CheckBox Content="{x:Static translations:UiBlockerResources.Enabled}" IsChecked="{Binding IsEnabled}" />

				<StackPanel Orientation="Horizontal">
					<StackPanel.Resources>
						<Style TargetType="ui:NumberBox">
							<Setter Property="Margin" Value="4" />
						</Style>

						<Style BasedOn="{StaticResource DefaultButtonStyle}" TargetType="Button">
							<Setter Property="Margin" Value="4" />
							<Setter Property="VerticalAlignment" Value="Bottom" />
						</Style>
					</StackPanel.Resources>

					<ui:NumberBox
						Header="{x:Static translations:UiBlockerResources.Top}"
						SpinButtonPlacementMode="Inline"
						Value="{Binding DesiredTop, Mode=TwoWay}"
						/>
					<ui:NumberBox
						Header="{x:Static translations:UiBlockerResources.Left}"
						SpinButtonPlacementMode="Inline"
						Value="{Binding DesiredLeft, Mode=TwoWay}"
						/>
					<ui:NumberBox
						Header="{x:Static translations:UiBlockerResources.Height}"
						Minimum="0"
						SpinButtonPlacementMode="Inline"
						Value="{Binding DesiredHeight, Mode=TwoWay}"
						/>
					<ui:NumberBox
						Header="{x:Static translations:UiBlockerResources.Width}"
						Minimum="0"
						SpinButtonPlacementMode="Inline"
						Value="{Binding DesiredWidth, Mode=TwoWay}"
						/>

					<Button Command="{Binding SetDesiredValuesToDefaultCommand}" Content="{x:Static translations:UiBlockerResources.Default}" />
				</StackPanel>

				<StackPanel Orientation="Horizontal">
					<TextBlock
						Margin="4"
						VerticalAlignment="Center"
						Text="{x:Static translations:UiBlockerResources.Background}"
						/>

					<controls:ColorPicker
						ColorMode="ColorCanvas"
						DisplayColorAndName="True"
						SelectedColor="{Binding BackgroundColor, Converter={StaticResource HexToColorConverter}}"
						>
						<controls:ColorPicker.Resources>
							<SolidColorBrush x:Key="PopupBackgroundBrush" Color="{DynamicResource SystemAltHighColor}" />
						</controls:ColorPicker.Resources>
					</controls:ColorPicker>
				</StackPanel>

				<Grid>
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="Auto" />
						<ColumnDefinition Width="*" />
						<ColumnDefinition Width="Auto" />
					</Grid.ColumnDefinitions>

					<TextBlock
						Grid.Column="0"
						Margin="4"
						VerticalAlignment="Center"
						Text="{x:Static translations:UiBlockerResources.Image}"
						/>

					<TextBox Grid.Column="1" Text="{Binding ImagePath, Mode=TwoWay}" />

					<Button
						Grid.Column="2"
						Margin="4 0"
						Command="{Binding OpenImagePathCommand}"
						Content="..."
						/>
				</Grid>
			</StackPanel>
		</DataTemplate>
	</Window.Resources>

	<Grid Margin="10">
		<Grid.RowDefinitions>
			<RowDefinition Height="*" />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>

		<TabControl
			Grid.Row="0"
			ItemsSource="{Binding Blockers}"
			SelectedItem="{Binding SelectedBlocker, Mode=TwoWay}"
			>
			<TabControl.ItemTemplate>
				<DataTemplate>
					<TextBlock Text="{Binding Header}" />
				</DataTemplate>
			</TabControl.ItemTemplate>

			<TabControl.ContentTemplate>
				<DataTemplate>
					<ContentPresenter Content="{Binding}" />
				</DataTemplate>
			</TabControl.ContentTemplate>
		</TabControl>

		<Button
			Grid.Row="1"
			Command="{Binding ShowBlockerCommand}"
			CommandParameter="{Binding SelectedBlocker}"
			Content="{x:Static translations:UiBlockerResources.Show}"
			/>
	</Grid>
</common:WindowBase>
